# LibreChat Configuration - Full Reference

version: 1.2.1
cache: true

# File storage - use 'local', 's3', or 'firebase' per type
fileStrategy: local
fileStrategies:
  default: local
  avatar: local
  image: local
  document: local

# Image output format for generations
imageOutputType: png

# Interface configuration
interface:
  customWelcome: 'Daily Thread'
  fileSearch: true
  endpointsMenu: true
  modelSelect: true
  parameters: true
  sidePanel: true
  presets: true
  multiConvo: true
  bookmarks: true
  memories: true
  temporaryChat: true
  runCode: true
  webSearch: true
  fileCitations: true
  prompts:
    use: true
    create: true
    share: false
    public: false
  agents:
    use: true
    create: true
    share: false
    public: false
  peoplePicker:
    users: true
    groups: true
    roles: true
  workflows: true
  # Show expandable tool input/output (JSON). Set false for business-facing UIs.
  toolCallDetails: false
  # Spacing of tool call rows: 'normal' | 'compact'
  toolCallSpacing: compact
  marketplace:
    use: true
  remoteAgents:
    use: false
    create: false
    share: false
    public: false
  temporaryChatRetention: 720
  mcpServers:
    use: true
    create: true
    share: false
    public: false
    trustCheckbox:
      label:
        en: 'I understand and I want to continue'
      subLabel:
        en: |
          LibreChat hasn't reviewed this MCP server. Attackers may attempt to steal your data or trick the model into taking unintended actions.
  privacyPolicy:
    externalUrl: 'https://dailythread.ai/privacy-policy'
    openNewTab: true
  termsOfService:
    externalUrl: 'https://dailythread.ai/tos'
    openNewTab: true
    modalAcceptance: true
    modalTitle: 'Terms of Service for LibreChat'
    modalContent: |
      # Terms and Conditions for LibreChat
      *Effective Date: February 18, 2024*
      Welcome to LibreChat. By using this service, you agree to our terms and privacy policy.

# Registration
registration:
  socialLogins: ['github', 'google', 'discord', 'openid', 'facebook', 'apple', 'saml']
  allowedDomains: []

# Balance and transactions (for usage-based billing)
balance:
  enabled: false
  startBalance: 20000
  autoRefillEnabled: false
  refillIntervalValue: 30
  refillIntervalUnit: days
  refillAmount: 10000

transactions:
  enabled: true

# Cloudflare Turnstile (bot protection)
turnstile:
  siteKey: '${TURNSTILE_SITE_KEY}'
  options:
    language: auto
    size: normal

# Rate limits
rateLimits:
  fileUploads:
    ipMax: 100
    ipWindowInMinutes: 60
    userMax: 50
    userWindowInMinutes: 60
  conversationsImport:
    ipMax: 100
    ipWindowInMinutes: 60
    userMax: 50
    userWindowInMinutes: 60

# Speech (TTS/STT)
speech:
  tts:
    openai:
      url: ''
      apiKey: '${TTS_API_KEY}'
      model: ''
      voices: []
  stt:
    openai:
      url: ''
      apiKey: '${STT_API_KEY}'
      model: ''

# Agent Actions domain restrictions (SSRF protection)
actions:
  allowedDomains:
    - 'swapi.dev'
    - 'dailythread.ai'
    - 'google.com'

# MCP Server domain restrictions
mcpSettings:
  allowedDomains:
    - 'localhost'
    - 'host.docker.internal'
    - '*.example.com'
    - 'mcp.stripe.com'
    - '*.plaid.com'
    - '*.hubspot.com'
    - '*.monday.com'
    - '*.asana.com'
    - '*.zoho.com'

# MCP Servers (example - uncomment and configure as needed)
mcpServers:
  # hubspot:
  #   command: npx
  #   args: ["-y", "@hubspot/mcp-server"]
  #   oauth:
  #     authorization_url: https://app.hubspot.com/oauth/authorize
  #     token_url: https://api.hubspot.com/oauth/v1/token
  #     client_id: "${HUBSPOT_MCP_CLIENT_ID}"
  #     client_secret: "${HUBSPOT_MCP_CLIENT_SECRET}"
  #     scope: "crm.objects.contacts.write oauth crm.objects.contacts.read"
  #     token_endpoint_auth_methods_supported: ["client_secret_post"]
  #     redirect_uri: "http://localhost:3080/api/mcp/hubspot/oauth/callback"
  #   env:
  #     PRIVATE_APP_ACCESS_TOKEN: "{{LIBRECHAT_MCP_OAUTH_ACCESS_TOKEN}}"
  # hubspot:
  #   type: streamable-http
  #   url: "https://mcp.hubspot.com"
  #   serverInstructions: true
  #   timeout: 45000
  #   initTimeout: 150000   # Connection establishment timeout for slow-starting servers
  #   oauthTimeout: 60000  # How long to wait for user to complete OAuth (default 60s)
  #   startup: false
  #   oauth:
  #     authorization_url: https://mcp.hubspot.com/oauth/authorize
  #     token_url: https://mcp.hubspot.com/oauth/v3/token
  #     client_id: "${HUBSPOT_MCP_CLIENT_ID}"
  #     client_secret: "${HUBSPOT_MCP_CLIENT_SECRET}"
  #     scope: ""
  #     token_endpoint_auth_methods_supported: ["client_secret_post"]
  #     code_challenge_methods_supported: ["S256"]
  HubSpot:
    oauthTimeout: 30000
    initTimeout: 150000
    type: stdio
    command: node
    args:
      - ./mcp-servers/hubspot-mcp-server/dist/index.js
    startup: false
    iconPath: /assets/hubspot.svg
    outputFormatter: token-optimized
    oauth:
      authorization_url: https://app.hubspot.com/oauth/authorize
      token_url: https://api.hubapi.com/oauth/v1/token
      client_id: '${HUBSPOT_CLIENT_ID}'
      client_secret: '${HUBSPOT_CLIENT_SECRET}'
      scope: "crm.objects.contacts.read crm.objects.contacts.write crm.objects.companies.read crm.objects.companies.write crm.objects.deals.read crm.objects.deals.write crm.objects.custom.read crm.objects.custom.write crm.schemas.contacts.read crm.schemas.companies.read crm.schemas.deals.read tickets oauth"
      token_endpoint_auth_methods_supported: ["client_secret_post"]
      redirect_uri: "http://localhost:3080/api/mcp/HubSpot/oauth/callback"
    env:
      HUBSPOT_ACCESS_TOKEN: "{{LIBRECHAT_MCP_OAUTH_ACCESS_TOKEN}}"
  Google:
    oauthTimeout: 30000
    initTimeout: 150000
    type: stdio
    command: node
    args:
      - ./mcp-servers/google-workspace/workspace-server/dist/index.js
    startup: false
    # Icon: put file in client/public/assets/ and reference as /assets/filename.ext
    iconPath: /assets/google.svg
    outputFormatter: token-optimized
    oauth:
      authorization_url: https://accounts.google.com/o/oauth2/v2/auth
      token_url: https://oauth2.googleapis.com/token
      client_id: '${GOOGLE_WORKSPACE_CLIENT_ID}'
      client_secret: '${GOOGLE_WORKSPACE_CLIENT_SECRET}'
      scope: "https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/documents https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/chat.spaces https://www.googleapis.com/auth/chat.messages https://www.googleapis.com/auth/chat.memberships https://www.googleapis.com/auth/gmail.modify https://www.googleapis.com/auth/gmail.labels https://www.googleapis.com/auth/directory.readonly https://www.googleapis.com/auth/contacts https://www.googleapis.com/auth/presentations https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/tasks"
    env:
      GOOGLE_ACCESS_TOKEN: "{{LIBRECHAT_MCP_OAUTH_ACCESS_TOKEN}}"
      WORKSPACE_CLIENT_ID: '${GOOGLE_WORKSPACE_CLIENT_ID}'
  Microsoft:
    oauthTimeout: 30000
    initTimeout: 150000
    type: stdio
    command: node
    args:
      - ./mcp-servers/ms-365-mcp-server/dist/index.js
      - --toon
      - --org-mode
    startup: false
    iconPath: /assets/microsoft.svg
    outputFormatter: token-optimized
    oauth:
      authorization_url: https://login.microsoftonline.com/common/oauth2/v2.0/authorize
      token_url: https://login.microsoftonline.com/common/oauth2/v2.0/token
      client_id: '${MS365_MCP_CLIENT_ID}'
      client_secret: '${MS365_MCP_CLIENT_SECRET}'
      scope: "User.Read Mail.Read Mail.ReadWrite Mail.Send Calendars.Read Calendars.ReadWrite Files.Read Files.ReadWrite Notes.Read Notes.Create Tasks.Read Tasks.ReadWrite Contacts.Read Contacts.ReadWrite People.Read Chat.Read ChatMessage.Read ChatMessage.Send Team.ReadBasic.All Channel.ReadBasic.All ChannelMessage.Read.All ChannelMessage.Send TeamMember.Read.All offline_access"
    env:
      MS365_MCP_OAUTH_TOKEN: "{{LIBRECHAT_MCP_OAUTH_ACCESS_TOKEN}}"
#   filesystem:
#     type: stdio
#     command: npx
#     args:
#       - -y
#       - "@modelcontextprotocol/server-filesystem"
#       - /path/to/allowed/directory
#     timeout: 60000

# Web Search configuration
webSearch:
  serperApiKey: '${SERPER_API_KEY}'
  searxngInstanceUrl: '${SEARXNG_INSTANCE_URL}'
  searxngApiKey: '${SEARXNG_API_KEY}'
  firecrawlApiKey: '${FIRECRAWL_API_KEY}'
  firecrawlApiUrl: '${FIRECRAWL_API_URL}'
  jinaApiKey: '${JINA_API_KEY}'
  jinaApiUrl: '${JINA_API_URL}'
  cohereApiKey: '${COHERE_API_KEY}'
  searchProvider: serper
  scraperProvider: firecrawl
  rerankerType: jina
  safeSearch: 1

# Memory configuration
memory:
  disabled: false
  validKeys: ['preferences', 'work_info', 'personal_info', 'skills', 'interests', 'context']
  tokenLimit: 10000
  charLimit: 10000
  personalize: true
  messageWindowSize: 5

# OCR configuration (for document text extraction)
# ocr:
#   strategy: mistral_ocr
#   apiKey: '${OCR_API_KEY}'
#   baseURL: '${OCR_BASEURL}'
#   mistralModel: 'pixtral-12b-2409'

# File upload configuration
fileConfig:
  endpoints:
    assistants:
      fileLimit: 5
      fileSizeLimit: 10
      totalSizeLimit: 50
      supportedMimeTypes:
        - 'image/.*'
        - 'application/pdf'
    openAI:
      fileLimit: 10
      fileSizeLimit: 20
      totalSizeLimit: 100
    default:
      fileLimit: 10
      fileSizeLimit: 20
      totalSizeLimit: 100
  serverFileSizeLimit: 100
  avatarSizeLimit: 2
  imageGeneration:
    percentage: 100
    px: 1024
  clientImageResize:
    enabled: false
    maxWidth: 1900
    maxHeight: 1900
    quality: 0.92

# Model specs (preset configurations)
# modelSpecs:
#   list:
#     - name: gpt-4o
#       label: GPT-4 Optimized
#       description: Most capable GPT-4 model
#       group: openAI
#       preset:
#         endpoint: openAI
#         model: gpt-4o
#     - name: claude-sonnet
#       label: Claude Sonnet
#       description: Balanced performance
#       group: anthropic
#       preset:
#         endpoint: anthropic
#         model: claude-sonnet-4-20250514

# Endpoints configuration
endpoints:
  custom:
    - name: OpenRouter
      apiKey: '${OPENROUTER_KEY}'
      baseURL: 'https://openrouter.ai/api/v1'
      headers:
        x-librechat-body-parentmessageid: '{{LIBRECHAT_BODY_PARENTMESSAGEID}}'
      models:
        default: ['deepseek/deepseek-v3.2']
        fetch: true
      titleConvo: true
      titleModel: deepseek/deepseek-v3.2
      dropParams: ['stop']
      modelDisplayLabel: OpenRouter

  # Assistants endpoint (OpenAI Assistants API)
  # assistants:
  #   disableBuilder: false
  #   pollIntervalMs: 3000
  #   timeoutMs: 180000
  #   retrievalModels: ['gpt-4-turbo-preview']
  #   capabilities: ['code_interpreter', 'retrieval', 'actions', 'tools', 'image_vision']

  # Agents endpoint
  agents:
    recursionLimit: 50
    maxRecursionLimit: 100
    disableBuilder: false
    maxCitations: 30
    maxCitationsPerFile: 7
    minRelevanceScore: 0.45
    capabilities:
      - deferred_tools
      - execute_code
      - file_search
      - web_search
      - artifacts
      - actions
      - context
      - tools
      - chain
      - ocr
      - manage_scheduling
      - inbound_email

  # Anthropic with Vertex AI (uncomment if using)
  # anthropic:
  #   streamRate: 20
  #   titleModel: claude-3-5-haiku-20241022
  #   vertex:
  #     region: us-east5
  #     models:
  #       claude-sonnet-4:
  #         deploymentName: claude-sonnet-4-20250514
  #       claude-3-5-haiku:
  #         deploymentName: claude-3-5-haiku@20241022

  # AWS Bedrock (uncomment if using)
  # bedrock:
  #   models:
  #     - anthropic.claude-3-7-sonnet-20250219-v1:0
  #     - anthropic.claude-3-5-sonnet-20241022-v2:0
  #   inferenceProfiles: {}
